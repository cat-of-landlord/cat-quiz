<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>豆瓣电影 Top 250 挑战</title>
    <style>
      :root {
        --douban-green: #007722;
        --bg-color: #f6f6f1;
        --text-main: #111;
        --text-secondary: #666;
        --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      body {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        background-color: var(--bg-color);
        margin: 0;
        padding-top: 140px; /* 为固定头部留空间 */
        color: var(--text-main);
      }

      /* 顶部固定控制栏 */
      header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: #fff;
        box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        padding: 15px 20px;
      }

      .header-top {
        max-width: 1000px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .back-link {
        text-decoration: none;
        color: var(--douban-green);
        font-weight: bold;
        font-size: 14px;
      }

      .stats-group {
        display: flex;
        gap: 20px;
        font-size: 14px;
        color: var(--text-secondary);
      }

      .stats-group strong {
        color: var(--douban-green);
        font-size: 18px;
      }

      .input-wrapper {
        max-width: 600px;
        margin: 0 auto;
        display: flex;
        gap: 10px;
      }

      #movie-input {
        flex: 1;
        padding: 12px 20px;
        border: 2px solid #ddd;
        border-radius: 25px;
        font-size: 16px;
        outline: none;
        transition: border-color 0.3s;
      }

      #movie-input:focus {
        border-color: var(--douban-green);
      }

      .btn {
        padding: 8px 20px;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        font-weight: bold;
        transition: opacity 0.2s;
      }

      .btn-end {
        background-color: #ff4d4f;
        color: white;
      }
      .btn:hover {
        opacity: 0.8;
      }

      /* 列表区域 */
      .container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
      }

      .movie-card {
        background: #fff;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        display: flex;
        gap: 20px;
        box-shadow: var(--card-shadow);
        transition: transform 0.3s;
      }

      .movie-rank {
        font-size: 24px;
        font-style: italic;
        color: #999;
        min-width: 40px;
      }

      .movie-info {
        flex: 1;
      }

      .clues {
        margin-bottom: 10px;
      }

      .director {
        color: var(--text-secondary);
        font-size: 14px;
        margin-bottom: 5px;
      }

      .quote {
        font-size: 16px;
        color: #333;
        background: #f9f9f9;
        padding: 8px 12px;
        border-left: 4px solid #ddd;
        display: inline-block;
      }

      .answer-display {
        margin-top: 15px;
        font-size: 18px;
        font-weight: bold;
        height: 24px;
        color: var(--douban-green);
      }

      .revealed-name {
        animation: fadeIn 0.5s;
      }

      .missed-name {
        color: #ff4d4f;
        text-decoration: line-through;
      }

      .movie-img-box {
        width: 100px;
        height: 148px;
        background: #eee;
        border-radius: 4px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .movie-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: none; /* 初始隐藏 */
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="header-top">
        <a href="../index.html" class="back-link">← 返回首页</a>
        <div class="stats-group">
          <div>计时: <strong id="timer">00:00</strong></div>
          <div>
            进度: <strong id="score">0</strong> /
            <span id="total-count">0</span>
          </div>
        </div>
        <button class="btn btn-end" onclick="endGame()">结束挑战</button>
      </div>
      <div class="input-wrapper">
        <input
          type="text"
          id="movie-input"
          placeholder="直接输入电影名称（支持简繁英）..."
          autocomplete="off"
        />
      </div>
    </header>

    <div class="container" id="movie-list"></div>

    <script>
      // 电影数据示例（你可以根据图片内容扩充此数组）
      // 豆瓣电影Top250前25部（严格匹配截图信息）
      const movieData = [
        {
          rank: 1,
          mainName: "肖申克的救赎",
          otherNames: ["The Shawshank Redemption", "月黑高飞", "刺激1995"],
          director: "弗兰克·德拉邦特 Frank Darabont",
          quote: "希望让人自由。",
        },
        {
          rank: 2,
          mainName: "霸王别姬",
          otherNames: ["再见，我的妾", "Farewell My Concubine"],
          director: "陈凯歌 Kaige Chen",
          quote: "风华绝代。",
        },
        {
          rank: 3,
          mainName: "泰坦尼克号",
          otherNames: ["Titanic", "铁达尼号"],
          director: "詹姆斯·卡梅隆 James Cameron",
          quote: "失去的才是永恒的。",
        },
        {
          rank: 4,
          mainName: "阿甘正传",
          otherNames: ["Forrest Gump", "福雷斯·冈普"],
          director: "罗伯特·泽米吉斯 Robert Zemeckis",
          quote: "美国梦的近景。",
        },
        {
          rank: 5,
          mainName: "千与千寻",
          otherNames: ["千と千尋の神隠し", "神隐少女", "千与千寻的神隐"],
          director: "宫崎骏 Hayao Miyazaki",
          quote: "最好的宫崎骏，最久的久石让。",
        },
        {
          rank: 6,
          mainName: "美丽人生",
          otherNames: [
            "La vita è bella",
            "一个快乐的传说",
            "Life Is Beautiful",
          ],
          director: "罗伯托·贝尼尼 Roberto Benigni",
          quote: "最美的谎言。",
        },
        {
          rank: 7,
          mainName: "星际穿越",
          otherNames: ["Interstellar", "星际启示录", "星际效应"],
          director: "克里斯托弗·诺兰 Christopher Nolan",
          quote: "爱是一种力量，让我们超越时空感知它的存在。",
        },
        {
          rank: 8,
          mainName: "这个杀手不太冷",
          otherNames: ["Léon", "终极追杀令", "杀手莱昂"],
          director: "吕克·贝松 Luc Besson",
          quote: "怪蜀黍和小萝莉不得不说的故事。",
        },
        {
          rank: 9,
          mainName: "盗梦空间",
          otherNames: ["Inception", "潜行凶间", "全面启动"],
          director: "克里斯托弗·诺兰 Christopher Nolan",
          quote: "诺兰给了我们一场无法盗取的梦。",
        },
        {
          rank: 10,
          mainName: "楚门的世界",
          otherNames: ["The Truman Show", "真人Show", "真人"],
          director: "彼得·威尔 Peter Weir",
          quote: "如果再也不能见到你，祝你早安，午安，晚安。",
        },
        {
          rank: 11,
          mainName: "辛德勒的名单",
          otherNames: ["Schindler's List", "舒特拉的名单", "辛德勒名单"],
          director: "史蒂文·斯皮尔伯格 Steven Spielberg",
          quote: "拯救一个人，就是拯救整个世界。",
        },
        {
          rank: 12,
          mainName: "忠犬八公的故事",
          otherNames: ["Hachi: A Dog's Tale", "秋田犬八千", "忠犬小八"],
          director: "莱塞·霍尔斯道姆 Lasse Hallström",
          quote: "永远不要忘记你所爱的人。",
        },
        {
          rank: 13,
          mainName: "海上钢琴师",
          otherNames: [
            "La leggenda del pianista sull'oceano",
            "声光伴我飞",
            "一九零零的传奇",
          ],
          director: "朱塞佩·托纳多雷 Giuseppe Tornatore",
          quote: "每个人都要走一条自己选定的路，就算是粉身碎骨。",
        },
        {
          rank: 14,
          mainName: "疯狂动物城",
          otherNames: ["Zootopia", "优兽大都会", "动物方城市"],
          director:
            "拜伦·霍华德 Byron Howard / 瑞奇·摩尔 Rich Moore / 杰拉德·布什 Jared Bush",
          quote:
            "迪士尼给我们塑造的乌托邦就是这样，永远善良勇敢，永远出乎意料。",
        },
        {
          rank: 15,
          mainName: "三傻大闹宝莱坞",
          otherNames: ["3 Idiots", "三个傻瓜", "作死不离3兄弟"],
          director: "拉吉库马尔·希拉尼 Rajkumar Hirani",
          quote: "英俊版憨豆，高情商版谢耳朵。",
        },
        {
          rank: 16,
          mainName: "机器人总动员",
          otherNames: ["WALL·E", "太空奇兵·威E", "瓦力"],
          director: "安德鲁·斯坦顿 Andrew Stanton",
          quote: "小瓦力，大人生。",
        },
        {
          rank: 17,
          mainName: "放牛班的春天",
          otherNames: ["Les choristes", "歌声伴我心", "唱诗班男孩"],
          director: "克里斯托夫·巴拉蒂 Christophe Barratier",
          quote: "天籁一般的童声，是最接近上帝的存在。",
        },
        {
          rank: 18,
          mainName: "无间道",
          otherNames: ["無間道", "Infernal Affairs", "Mou gaan dou"],
          director: "刘伟强 / 麦兆辉",
          quote: "香港电影史上永不过时的杰作。",
        },
        {
          rank: 19,
          mainName: "控方证人",
          otherNames: ["Witness for the Prosecution", "雄才伟略"],
          director: "比利·怀尔德 Billy Wilder",
          quote: "比利怀尔德满分作品。",
        },
        {
          rank: 20,
          mainName: "大话西游之大圣娶亲",
          otherNames: [
            "西遊記之大聖娶親",
            "西遊記結局篇仙履奇緣",
            "西遊記之仙履奇緣",
          ],
          director: "刘镇伟 Jeffrey Lau",
          quote: "一生所爱。",
        },
        {
          rank: 21,
          mainName: "熔炉",
          otherNames: ["도가니", "无声呐喊", "熔爐"],
          director: "黄东赫 Dong-hyuk Hwang",
          quote: "我们一路奋战，不是为了改变世界，而是为了不让世界改变我们。",
        },
        {
          rank: 22,
          mainName: "寻梦环游记",
          otherNames: ["Coco", "玩转极乐园", "可可夜总会"],
          director: "李·昂克里奇 Lee Unkrich / 阿德里安·莫利纳 Adrian Molina",
          quote: "死亡不是真的逝去，遗忘才是永恒的消亡。",
        },
        {
          rank: 23,
          mainName: "触不可及",
          otherNames: ["Intouchables", "闪亮人生", "逆转人生"],
          director:
            "奥利维·那卡什 Olivier Nakache / 艾力克·托兰达 Éric Toledano",
          quote: "满屏清透的善意。",
        },
        {
          rank: 24,
          mainName: "教父",
          otherNames: ["The Godfather", "Mario Puzo's The Godfather"],
          director: "弗朗西斯·福特·科波拉 Francis Ford Coppola",
          quote: "千万不要记恨你的对手，这样会让你失去理智。",
        },
        {
          rank: 25,
          mainName: "末代皇帝",
          otherNames: [
            "The Last Emperor",
            "末代皇帝溥仪",
            "L'ultimo Imperatore",
          ],
          director: "贝纳尔多·贝托鲁奇 Bernardo Bertolucci",
          quote: "不要指望比这更合适这部电影的配乐了。",
        },
      ];

      let solvedCount = 0;
      let seconds = 0;
      let gameActive = true;
      let timerInterval;

      // 初始化界面
      function init() {
        const listContainer = document.getElementById("movie-list");
        document.getElementById("total-count").textContent = movieData.length;

        movieData.forEach((movie) => {
          const card = document.createElement("div");
          card.className = "movie-card";
          card.id = `movie-${movie.rank}`;
          card.innerHTML = `
                <div class="movie-rank">#${movie.rank}</div>
                <div class="movie-info">
                    <div class="clues">
                        <div class="director">导演: ${movie.director}</div>
                        <div class="quote">“${movie.quote}”</div>
                    </div>
                    <div class="answer-display" id="ans-${movie.rank}"></div>
                </div>
                <div class="movie-img-box">
                    <img src="${movie.mainName}.webp" class="movie-img" id="img-${movie.rank}" alt="${movie.mainName}">
                </div>
            `;
          listContainer.appendChild(card);
        });

        startTimer();
      }

      // 计时器
      function startTimer() {
        timerInterval = setInterval(() => {
          seconds++;
          const m = Math.floor(seconds / 60)
            .toString()
            .padStart(2, "0");
          const s = (seconds % 60).toString().padStart(2, "0");
          document.getElementById("timer").textContent = `${m}:${s}`;
        }, 1000);
      }

      // 输入匹配逻辑
      const inputField = document.getElementById("movie-input");
      inputField.addEventListener("input", (e) => {
        if (!gameActive) return;

        const val = e.target.value.trim().toLowerCase();
        if (!val) return;

        movieData.forEach((movie, index) => {
          const ansDiv = document.getElementById(`ans-${movie.rank}`);
          if (ansDiv.textContent !== "") return; // 已答对

          // 检查所有名称
          const allPossibleNames = [movie.mainName, ...movie.otherNames].map(
            (n) => n.toLowerCase()
          );

          if (allPossibleNames.includes(val)) {
            // 答对了！
            revealMovie(movie);
            e.target.value = ""; // 清空输入框
          }
        });
      });

      function revealMovie(movie) {
        const ansDiv = document.getElementById(`ans-${movie.rank}`);
        const img = document.getElementById(`img-${movie.rank}`);

        ansDiv.innerHTML = `<span class="revealed-name">${movie.mainName}</span>`;
        img.style.display = "block";
        img.style.animation = "fadeIn 0.5s";

        solvedCount++;
        document.getElementById("score").textContent = solvedCount;

        // 自动滚动到对应位置
        document.getElementById(`movie-${movie.rank}`).scrollIntoView({
          behavior: "smooth",
          block: "center",
        });

        if (solvedCount === movieData.length) {
          endGame(true);
        }
      }

      function endGame(isWin = false) {
        gameActive = false;
        clearInterval(timerInterval);
        inputField.disabled = true;

        // 显示未答出的答案
        movieData.forEach((movie) => {
          const ansDiv = document.getElementById(`ans-${movie.rank}`);
          if (ansDiv.textContent === "") {
            ansDiv.innerHTML = `<span class="missed-name">${movie.mainName}</span>`;
            const img = document.getElementById(`img-${movie.rank}`);
            img.style.display = "block";
            img.style.opacity = "0.5";
          }
        });

        if (isWin) {
          alert("太棒了！你认出了所有的电影！");
        } else {
          alert(`挑战结束！你共认出了 ${solvedCount} 部电影。`);
        }
      }

      window.onload = init;
    </script>
  </body>
</html>
