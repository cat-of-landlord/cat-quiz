<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>猫科动物识物背诵助手</title>
    <style>
        :root {
            --primary-color: #007bff;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --bg-color: #f4f7f6;
        }

        body { 
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; 
            margin: 0; 
            padding-top: 140px; /* 为顶部固定栏留出空间 */
            background-color: var(--bg-color); 
        }

        /* 顶部固定区域 */
        .header-sticky {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px 20px;
            text-align: center;
        }

        .header-sticky h2 { margin: 0 0 10px 0; font-size: 1.2rem; color: #333; }

        .input-group {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        input { 
            padding: 12px 15px; 
            font-size: 16px; 
            width: 300px; 
            border: 2px solid #ddd; 
            border-radius: 25px; 
            transition: all 0.3s;
        }

        input:focus { border-color: var(--primary-color); outline: none; box-shadow: 0 0 8px rgba(0,123,255,0.2); }

        .progress-container {
            max-width: 600px;
            margin: 0 auto;
            background: #eee;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
        }

        #progressBar {
            width: 0%;
            height: 100%;
            background: var(--success-color);
            transition: width 0.3s;
        }

        /* 核心卡片网格布局 */
        .quiz-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .quiz-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: transform 0.2s;
            position: relative;
            border: 2px solid transparent;
        }

        .quiz-card.done { border-color: var(--success-color); }

        .img-container {
            width: 100%;
            aspect-ratio: 1 / 1;
            overflow: hidden;
            background: #f0f0f0;
        }

        .quiz-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-info {
            padding: 8px;
            text-align: center;
            font-size: 0.9rem;
            min-height: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .status-tag {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
            display: inline-block;
            margin-bottom: 4px;
        }

        .tag-todo { background: #ffebeb; color: #d63031; }
        .tag-done { background: #e3f9e5; color: #1b5e20; }

        .user-ans { font-weight: bold; color: #333; word-break: break-all; }

        /* 结果区域 */
        .result-area {
            text-align: center;
            padding: 40px;
            background: white;
            margin: 20px;
            border-radius: 12px;
        }

        button {
            padding: 10px 25px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: opacity 0.2s;
        }

        #endBtn { background: #6c757d; color: white; }
        #restartBtn { background: var(--primary-color); color: white; }
        button:hover { opacity: 0.9; }

        .hidden { display: none; }
        .message-tip { height: 20px; font-size: 14px; margin-top: 5px; }
    </style>
</head>
<body>

<div class="header-sticky">
    <h2>请输入答案 (<span id="countInfo">0/0</span>)</h2>
    <div class="input-group">
        <input id="answerInput" type="text" placeholder="看图猜名，回车确认..." autofocus>
        <button onclick="endQuiz()" id="endBtn">结束并看答案</button>
        <button onclick="restartQuiz()" class="hidden" id="restartBtn">重新开始</button>
    </div>
    <div class="progress-container">
        <div id="progressBar"></div>
    </div>
    <div id="message" class="message-tip"></div>
</div>

<div class="quiz-grid" id="quizGrid">
    </div>

<div id="resultArea" class="hidden result-area">
    <hr>
    <h3>测试完成！</h3>
    <p id="scoreSummary"></p>
</div>

<script>
    const quizData = [
        { img: "阿比西尼亚猫.jpg", alts: ["阿比西尼亚猫","兔猫","Abyssinian"]},
        { img: "埃及猫.jpg", alts: ["埃及猫","Egyptian Mau","Mau"] },
        { img: "巴厘岛猫.jpg", alts: ["巴厘岛猫","巴里猫","巴厘猫","爪哇猫","Balinese","Javanese"] },
        { img: "波米拉猫.jpg", alts: ["波米拉猫","柏米拉猫","博美拉猫","Burmilla"] },
        { img: "波斯猫.jpg", alts: ["波斯猫","Persian"] },
        { img: "伯曼猫.jpg", alts: ["伯曼猫","缅甸圣猫","圣猫","Birman"] },
        { img: "布偶猫.jpg", alts: ["布偶猫","拉格道尔猫","Ragdoll"] },
        { img: "德文帝王猫.jpg", alts: ["德文帝王猫","德文卷毛猫","德文力克斯猫","Devon Rex"] },
        { img: "东方猫.jpg", alts: ["东方猫","东方短毛猫","Oriental Shorthair","Oriental"] },
        { img: "东奇尼猫.jpg", alts: ["东奇尼猫","汤金斯猫","托金斯猫","Tonkinese"] },
        { img: "俄罗斯蓝猫.jpg", alts: ["俄罗斯蓝猫","阿契安吉蓝猫","Russian Blue"] },
        { img: "哈瓦那棕猫.jpg", alts: ["哈瓦那棕猫","哈瓦那猫","Havana Brown"] },
        { img: "柯尼斯卷毛猫.jpg", alts: ["柯尼斯卷毛猫","康沃尔卷毛猫","科尼斯卷毛猫","Cornish Rex"] },
        { img: "克拉特猫.jpg", alts: ["克拉特猫","科拉特猫","呵叻猫","吉祥猫","Korat"] },
        { img: "拉波卷毛猫.jpg", alts: ["拉波卷毛猫","拉波猫","莱博猫","LaPerm"] },
        { img: "褴褛猫.jpg", alts: ["褴褛猫","勒嘉德摩猫","Ragamuffin"] },
        { img: "狼猫.jpg", alts: ["狼猫","莱科猫","Lykoi"] },
        { img: "马恩岛猫.jpg", alts: ["马恩岛猫","曼岛猫","曼克斯猫","Manx"] },
        { img: "美国短毛猫.jpg", alts: ["美国短毛猫","美短","American Shorthair"] },
        { img: "美国短尾猫.jpg", alts: ["美国短尾猫","美短尾","American Bobtail"] },
        { img: "美国卷耳猫.jpg", alts: ["美国卷耳猫","美国反耳猫","American Curl"] },
        { img: "美国硬毛猫.jpg", alts: ["美国硬毛猫","美国刚毛猫","American Wirehair"] },
        { img: "孟加拉猫.jpg", alts: ["孟加拉猫","豹猫","孟加拉豹猫","Bengal"] },
        { img: "孟买猫.jpg", alts: ["孟买猫","小黑豹","Bombay"] },
        { img: "缅甸猫.jpg", alts: ["缅甸猫","缅摩猫","Burmese"] },
        { img: "缅因猫.jpg", alts: ["缅因猫","缅因库恩猫","Maine Coon"] },
	{ img: "挪威森林猫.jpg", alts: ["挪威森林猫","挪威森","Norwegian Forest Cat"] },
	{ img: "欧西猫.jpg", alts: ["欧西猫","奥西猫","Ocicat"] },
	{ img: "欧洲缅甸猫.jpg", alts: ["欧洲缅甸猫","European Burmese"] },
	{ img: "日本短尾猫.jpg", alts: ["日本短尾猫","招财猫","Japanese Bobtail"] },
	{ img: "赛尔凯克卷毛猫.jpg", alts: ["赛尔凯克卷毛猫","塞尔凯克卷毛猫","羊皮筏子猫","Selkirk Rex"] },
	{ img: "斯芬克斯猫.jpg", alts: ["斯芬克斯猫","加拿大无毛猫","无毛猫","Sphynx"] },
	{ img: "苏格兰折耳猫.jpg", alts: ["苏格兰折耳猫","折耳猫","Scottish Fold"] },
	{ img: "索马里猫.jpg", alts: ["索马里猫","Somali"] },
	{ img: "泰国御猫.jpg", alts: ["泰国御猫","考玛尼猫","Khao Manee"] },
	{ img: "土耳其安哥拉猫.jpg", alts: ["土耳其安哥拉猫","安哥拉猫","Turkish Angora"] },
	{ img: "土耳其梵猫.jpg", alts: ["土耳其梵猫","梵猫","Turkish Van"] },
	{ img: "西伯利亚猫.jpg", alts: ["西伯利亚猫","西伯利亚森林猫","Siberian"] },
	{ img: "夏特尔猫.jpg", alts: ["夏特尔猫","沙特尔猫","Chartreux"] },
	{ img: "暹罗猫.jpg", alts: ["暹罗猫","泰国猫","Siamese"] },
	{ img: "新加坡猫.jpg", alts: ["新加坡猫","Singpura"] },
	{ img: "异国猫.jpg", alts: ["异国猫","异国短毛猫","加菲猫","Exotic Shorthair"] },
	{ img: "英国短毛猫.jpg", alts: ["英国短毛猫","英短","British Shorthair"] },
	{ img: "重点色短毛猫.jpg", alts: ["重点色短毛猫","端子色短毛猫","Colorpoint Shorthair"] }
            ];

    let userCorrectIndexes = [];
    let ended = false;
    const inputBox = document.getElementById("answerInput");
    const grid = document.getElementById("quizGrid");

    function initGrid() {
        grid.innerHTML = "";
        quizData.forEach((item, index) => {
            const card = document.createElement("div");
            card.className = "quiz-card";
            card.id = `card-${index}`;
            card.innerHTML = `
                <div class="img-container">
                    <img src="${item.img}" class="quiz-img" alt="题目">
                </div>
                <div class="card-info">
                    <div id="status-${index}"><span class="status-tag tag-todo">未识别</span></div>
                    <div id="ans-text-${index}" class="user-ans">-</div>
                </div>
            `;
            grid.appendChild(card);
        });
        updateProgress();
    }

    inputBox.addEventListener("keydown", (e) => {
        if (e.key === "Enter" && !ended) checkAnswer();
    });

    function checkAnswer() {
        const input = inputBox.value.trim().toLowerCase();
        const message = document.getElementById("message");
        if (!input) return;

        let foundIndex = quizData.findIndex(item => 
            item.alts.some(a => a.toLowerCase() === input)
        );

        if (foundIndex !== -1) {
            if (!userCorrectIndexes.includes(foundIndex)) {
                userCorrectIndexes.push(foundIndex);
                message.innerHTML = `<span style="color:var(--success-color)">✔ 匹配到：${input}</span>`;
                markAsDone(foundIndex, input);
            } else {
                message.innerHTML = `<span style="color:orange">⚠ "${input}" 已填过</span>`;
            }
        } else {
            message.innerHTML = `<span style="color:var(--danger-color)">✘ 未匹配到 "${input}"</span>`;
        }
        inputBox.value = "";
        updateProgress();
    }

    function markAsDone(index, input) {
        const card = document.getElementById(`card-${index}`);
        card.classList.add("done");
        document.getElementById(`status-${index}`).innerHTML = `<span class="status-tag tag-done">已识别</span>`;
        document.getElementById(`ans-text-${index}`).innerText = input;
        
        // 可选：匹配正确后自动滚动到该卡片，方便确认
        card.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function updateProgress() {
        const count = userCorrectIndexes.length;
        const total = quizData.length;
        document.getElementById("countInfo").innerText = `${count}/${total}`;
        document.getElementById("progressBar").style.width = `${(count/total)*100}%`;
        
        if (count === total && total > 0) endQuiz();
    }

    function endQuiz() {
        ended = true;
        inputBox.disabled = true;
        quizData.forEach((item, index) => {
            if (!userCorrectIndexes.includes(index)) {
                const card = document.getElementById(`card-${index}`);
                card.style.borderColor = "var(--danger-color)";
                document.getElementById(`ans-text-${index}`).innerHTML = 
                    `<span class="wrong">${item.alts[0]}</span>`;
            }
        });
        document.getElementById("scoreSummary").innerText = `准确率：${userCorrectIndexes.length} / ${quizData.length}`;
        document.getElementById("resultArea").classList.remove("hidden");
        document.getElementById("restartBtn").classList.remove("hidden");
        document.getElementById("endBtn").classList.add("hidden");
    }

    function restartQuiz() {
        userCorrectIndexes = [];
        ended = false;
        inputBox.disabled = false;
        document.getElementById("message").innerText = "";
        document.getElementById("resultArea").classList.add("hidden");
        document.getElementById("restartBtn").classList.add("hidden");
        document.getElementById("endBtn").classList.remove("hidden");
        initGrid();
        window.scrollTo(0,0);
    }

    initGrid();
</script>
</body>
</html>